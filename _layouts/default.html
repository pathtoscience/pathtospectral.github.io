<!DOCTYPE html>
<html lang="{{ site.lang | default: " en-US" }}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <!-- Google Fonts: Outfit and Plus Jakarta Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap"
        rel="stylesheet">
    <!-- FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/api/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <div class="wrapper">
        <!-- Sidebar (Varoquaux Style) -->
        <aside class="sidebar">
            <div class="profile-section">
                <img src="{{ '/assets/images/profile.png' | relative_url }}" alt="Profile Photo" class="profile-img">
            </div>

            <h1 class="site-title"><a href="{{ '/' | relative_url }}">{{ site.title }}</a></h1>
            <p class="description">{{ site.description }}</p>

            <div class="theme-toggle-wrapper">
                <button id="theme-toggle" class="theme-btn">
                    <span id="theme-icon"><i class="fas fa-moon"></i></span>
                    <span id="theme-text">Light Mode</span>
                </button>
            </div>

            <div class="social-links">
                {% if site.social.scholar %}
                <a href="{{ site.social.scholar }}" target="_blank" title="Google Scholar"><i
                        class="fas fa-graduation-cap"></i></a>
                {% endif %}
                {% if site.social.linkedin %}
                <a href="{{ site.social.linkedin }}" target="_blank" title="LinkedIn"><i
                        class="fab fa-linkedin"></i></a>
                {% endif %}
                {% if site.social.x %}
                <a href="{{ site.social.x }}" target="_blank" title="X (Twitter)"><i class="fab fa-x-twitter"></i></a>
                {% endif %}
                {% if site.social.personal %}
                <a href="{{ site.social.personal }}" target="_blank" title="Personal Website"><i
                        class="fas fa-globe"></i></a>
                {% endif %}
            </div>

            <nav>
                {% for item in site.navigation %}
                <a href="{{ item.url | relative_url }}" {% if page.url==item.url %}class="active" {% endif %}>{{
                    item.title }}</a>
                {% endfor %}
            </nav>
        </aside>

        <!-- Main Content (Duvenaud Style) -->
        <main class="content">
            {{ content }}
        </main>
    </div>

    <script>
        (function () {
            const btn = document.getElementById('theme-toggle');
            const themeText = document.getElementById('theme-text');
            const themeIcon = document.getElementById('theme-icon');
            const body = document.body;

            function updateUI(isLight) {
                if (isLight) {
                    body.classList.add('light-mode');
                    themeText.innerText = 'Dark Mode';
                    themeIcon.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    body.classList.remove('light-mode');
                    themeText.innerText = 'Light Mode';
                    themeIcon.innerHTML = '<i class="fas fa-moon"></i>';
                }
            }

            // Sync with local storage
            const currentTheme = localStorage.getItem('theme');
            updateUI(currentTheme === 'light');

            btn.addEventListener('click', function () {
                const isLight = !body.classList.contains('light-mode');
                updateUI(isLight);
                localStorage.setItem('theme', isLight ? 'light' : 'dark');
            });
        })();
    </script>
</body>

</html>